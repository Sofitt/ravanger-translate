# ü§ñ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è LLM-–ø–µ—Ä–µ–≤–æ–¥–∞

## üìã –û–±–∑–æ—Ä

–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM –º–æ–¥–µ–ª–µ–π.

---

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 1. `llm_translate_prepare.py`
–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ LLM

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü–∞—Ä—Å–∏–Ω–≥ `.rpy` —Ñ–∞–π–ª–æ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Ç–µ–≥–æ–≤, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON —Ñ–æ—Ä–º–∞—Ç

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ–¥–∏–Ω –º–æ–¥—É–ª—å
python3 llm_translate_prepare.py --module ../translation_modules/c1_ru.rpy \
                                   --output ../temp_files/llm_json/c1_ru.json

# –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏ (–ø–∞–∫–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º)
python3 llm_translate_prepare.py --batch ../translation_modules \
                                   --batch-output ../temp_files/llm_json

# –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏)
python3 llm_translate_prepare.py
```

**–í—ã—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç JSON:**

```json
{
  "metadata": {
    "module": "c1_ru.rpy",
    "total_strings": 236,
    "translated": 0,
    "untranslated": 236
  },
  "strings": [
    {
      "id": 0,
      "comment": "c1.rpy:123",
      "original": "Hello, {name}!",
      "translation": "",
      "context": "dialogue",
      "tags": [],
      "variables_curly": ["name"],
      "variables_square": [],
      "special_chars": {
        "newlines": 0,
        "tabs": 0,
        "escaped_quotes": 0
      }
    }
  ]
}
```

---

### 2. `llm_translate.py`
–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —á–µ—Ä–µ–∑ LLM

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ backends:**
- OpenAI-compatible API (llama.cpp, text-generation-webui, vLLM)
- Ollama

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ç–µ–≥–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ë–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (llama.cpp server)
python3 llm_translate.py --input ../temp_files/llm_json/c1_ru.json \
                          --output ../temp_files/llm_json/c1_ru_translated.json \
                          --api-url http://localhost:8080/v1/chat/completions \
                          --model local-model

# Ollama
python3 llm_translate.py --input ../temp_files/llm_json/c1_ru.json \
                          --output ../temp_files/llm_json/c1_ru_translated.json \
                          --backend ollama \
                          --api-url http://localhost:11434/api/chat \
                          --model llama3

# –° –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
python3 llm_translate.py --input ../temp_files/llm_json/c1_ru.json \
                          --output ../temp_files/llm_json/c1_ru_translated.json \
                          --temperature 0.3 \
                          --max-tokens 2000
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `--input` - –≤—Ö–æ–¥–Ω–æ–π JSON —Ñ–∞–π–ª
- `--output` - –≤—ã—Ö–æ–¥–Ω–æ–π JSON —Ñ–∞–π–ª
- `--backend` - backend: `openai` –∏–ª–∏ `ollama` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `openai`)
- `--api-url` - URL API —Å–µ—Ä–≤–µ—Ä–∞
- `--api-key` - API –∫–ª—é—á (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- `--model` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
- `--temperature` - temperature (0.0-1.0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.3)
- `--max-tokens` - –º–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `{var}` –∏ `[var]`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å —Ç–µ–≥–æ–≤ `{color}`, `{b}`, –∏ —Ç.–¥.
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫ `\n`
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫ `\"`

---

### 3. `llm_translate_apply.py`
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∏–∑ JSON –æ–±—Ä–∞—Ç–Ω–æ –≤ .rpy —Ñ–∞–π–ª—ã

**–§—É–Ω–∫—Ü–∏–∏:**
- –ß—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∏–∑ JSON
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `.rpy` —Ñ–∞–π–ª–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–¥–∏–Ω –º–æ–¥—É–ª—å
python3 llm_translate_apply.py --input ../temp_files/llm_json/c1_ru_translated.json \
                                --module ../translation_modules/c1_ru.rpy

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
python3 llm_translate_apply.py --input ../temp_files/llm_json/c1_ru_translated.json \
                                --module ../translation_modules/c1_ru.rpy \
                                --output ../translation_modules/c1_ru_new.rpy

# –ü–∞–∫–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º
python3 llm_translate_apply.py --batch-json ../temp_files/llm_json \
                                --batch-rpy ../translation_modules

# –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã)
python3 llm_translate_apply.py
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –í—Å–µ–≥–æ –±–ª–æ–∫–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –ü—Ä–æ–ø—É—â–µ–Ω–æ (—É–∂–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ)
- –ü—Ä–æ–ø—É—â–µ–Ω–æ (–Ω–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–∞)

---

## üöÄ –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω

### –®–∞–≥ 0: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install requests
```

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ LLM —Å–µ—Ä–≤–µ—Ä–∞

#### –í–∞—Ä–∏–∞–Ω—Ç A: llama.cpp server

```bash
# –°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, Saiga –∏–ª–∏ LLaMA)
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
./llama-server -m model.gguf -c 4096 --port 8080
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: Ollama

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama: https://ollama.ai
ollama pull llama3
ollama serve
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: text-generation-webui

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å API —Ä–µ–∂–∏–º–æ–º
python server.py --api --listen
```

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
cd tools

# –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
python3 llm_translate_prepare.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** JSON —Ñ–∞–π–ª—ã –≤ `../temp_files/llm_json/`

### –®–∞–≥ 3: –ü–µ—Ä–µ–≤–æ–¥ —á–µ—Ä–µ–∑ LLM

```bash
# –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ–¥–∏–Ω –º–æ–¥—É–ª—å
python3 llm_translate.py \
    --input ../temp_files/llm_json/c1_ru.json \
    --output ../temp_files/llm_json/c1_ru_translated.json \
    --api-url http://localhost:8080/v1/chat/completions

# –ò–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ –º–æ–¥—É–ª–∏ (—Å–∫—Ä–∏–ø—Ç-–ø–æ–º–æ—â–Ω–∏–∫)
for file in ../temp_files/llm_json/*.json; do
    basename=$(basename "$file" .json)
    if [[ ! "$basename" == *"_translated" ]]; then
        python3 llm_translate.py \
            --input "$file" \
            --output "../temp_files/llm_json/${basename}_translated.json" \
            --api-url http://localhost:8080/v1/chat/completions
    fi
done
```

### –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ .rpy —Ñ–∞–π–ª—ã
python3 llm_translate_apply.py
```

### –®–∞–≥ 5: –£–ø–∞–∫–æ–≤–∫–∞ –≤ –∏–≥—Ä—É

```bash
# –£–ø–∞–∫–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –≤ –∏–≥—Ä—É
python3 smart_pack_translations.py
```

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
cd ..
./Ravager.sh
# –í –∏–≥—Ä–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –Ø–∑—ã–∫ ‚Üí –†—É—Å—Å–∫–∏–π
```

---

## üìä –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ LLM

### –ú–æ–¥–µ–ª–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:**
- **Saiga 8B/13B** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- **LLaMA 3 8B/70B** - —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–∞
- **Qwen 7B/14B** - —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä—É—Å—Å–∫–∏–º

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- 8B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –ø—Ä–∏–µ–º–ª–µ–º–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- 13B+ –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```python
temperature = 0.3        # –ù–∏–∑–∫–∞—è –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
top_p = 0.9
top_k = 40
max_tokens = 2000
repeat_penalty = 1.1
```

### –ü—Ä–æ–º–ø—Ç

–°–º. `documentation/LLM_TRANSLATION_GUIDE.md` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞.

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤—Ä—É—á–Ω—É—é:**
- –ü–µ—Ä–≤—ã–µ 10-20 —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- –í–∞–∂–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ –∏ —Å—é–∂–µ—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

### 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è LLM

**LLM –º–æ–∂–µ—Ç –æ—à–∏–±–∞—Ç—å—Å—è –≤:**
- –°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏ —Ç–æ–Ω–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–∞—Ö —Ñ—ç–Ω—Ç–µ–∑–∏-—Å–µ—Ç—Ç–∏–Ω–≥–∞

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –≥–ª–æ—Å—Å–∞—Ä–∏–π –∏ –≤–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –≤ –ø—Ä–æ–º–ø—Ç

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞:**
- ~1-2 —Å—Ç—Ä–æ–∫–∏ –≤ —Å–µ–∫—É–Ω–¥—É (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥–µ–ª–∏ –∏ –∂–µ–ª–µ–∑–∞)
- ~100-200 —Å—Ç—Ä–æ–∫ –∑–∞ 2-5 –º–∏–Ω—É—Ç
- –ü–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (27,969 —Å—Ç—Ä–æ–∫) - –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–≤–∞–Ω—Ç–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Q4_K_M, Q5_K_M)
- –í–∫–ª—é—á–∏—Ç–µ GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ
- –ü–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –º–æ–¥—É–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö)

### 4. –°—Ç–æ–∏–º–æ—Å—Ç—å

**–õ–æ–∫–∞–ª—å–Ω–∞—è LLM:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –º–æ—â–Ω–æ–µ –∂–µ–ª–µ–∑–æ

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∂–µ–ª–µ–∑–∞:**
- 8B –º–æ–¥–µ–ª—å: 8-16 GB RAM/VRAM
- 13B –º–æ–¥–µ–ª—å: 16-32 GB RAM/VRAM
- 70B –º–æ–¥–µ–ª—å: 64+ GB RAM –∏–ª–∏ –º–æ—â–Ω—ã–π GPU

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–µ—Ä
curl http://localhost:8080/v1/models

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–≤–æ–¥—ã –Ω–∏–∑–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω—É—é –º–æ–¥–µ–ª—å
- –£—Ç–æ—á–Ω–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- –°–Ω–∏–∑—å—Ç–µ temperature –¥–æ 0.1-0.2
- –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç (few-shot learning)

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —ç—Ç–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `llm_translate.py`
- –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- –£—Ç–æ—á–Ω–∏—Ç–µ –ø—Ä–æ–º–ø—Ç —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–≤–∞–Ω—Ç–∏–∑–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å (Q4_K_M –≤–º–µ—Å—Ç–æ F16)
- –£–≤–µ–ª–∏—á—å—Ç–µ batch size (–µ—Å–ª–∏ API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)
- –ü–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –º–æ–¥—É–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ llm_translate.py
python3 llm_translate.py --input c1_ru.json --output c1_ru_tr.json &
python3 llm_translate.py --input c2_ru.json --output c2_ru_tr.json &
python3 llm_translate.py --input c3_ru.json --output c3_ru_tr.json &
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- `documentation/LLM_TRANSLATION_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–µ—Ä–µ–≤–æ–¥—É
- `documentation/WORKFLOW.md` - –æ–±—â–∏–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å
- `tools/README.md` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

---

## üéØ –°–æ–≤–µ—Ç—ã –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### 1. –ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–∞

–ü–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –º–æ–¥—É–ª–∏ –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:
1. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (`screens_ru.rpy`, `options_ru.rpy`) - –ø—Ä–æ–≤–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—Ç—É –ø–∞–π–ø–ª–∞–π–Ω–∞
2. **–ú–∞–ª–µ–Ω—å–∫–∏–µ –º–æ–¥—É–ª–∏** - –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å, –º–æ—Ç–∏–≤–∞—Ü–∏—è
3. **–û—Å–Ω–æ–≤–Ω–æ–π —Å—é–∂–µ—Ç** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç** - –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å

### 2. –ì–ª–æ—Å—Å–∞—Ä–∏–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `glossary.json`:

```json
{
  "Dragon": "–î—Ä–∞–∫–æ–Ω",
  "Kobold": "–ö–æ–±–æ–ª—å–¥",
  "Lair": "–õ–æ–≥–æ–≤–æ",
  "Hoard": "–ö–ª–∞–¥",
  "Ravager": "–†–∞–∑–æ—Ä–∏—Ç–µ–ª—å"
}
```

–í–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç:

```python
system_prompt += "\n\n–ì–õ–û–°–°–ê–†–ò–ô:\n"
for en, ru in glossary.items():
    system_prompt += f"{en} ‚Üí {ru}\n"
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:

```bash
# –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏
python3 translation_helper.py
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥ –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è

```bash
cd tools

# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å
python3 llm_translate_prepare.py \
    --module ../translation_modules/c1_ru.rpy \
    --output ../temp_files/c1_ru.json

# 2. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏
python3 llm_translate.py \
    --input ../temp_files/c1_ru.json \
    --output ../temp_files/c1_ru_translated.json

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å
python3 llm_translate_apply.py \
    --input ../temp_files/c1_ru_translated.json \
    --module ../translation_modules/c1_ru.rpy

# 4. –£–ø–∞–∫–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
python3 smart_pack_translations.py
cd .. && ./Ravager.sh
```

### –ü—Ä–∏–º–µ—Ä 2: –ú–∞—Å—Å–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π

```bash
cd tools

# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏
python3 llm_translate_prepare.py

# 2. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ (—Ü–∏–∫–ª)
for file in ../temp_files/llm_json/*.json; do
    basename=$(basename "$file" .json)
    echo "–ü–µ—Ä–µ–≤–æ–¥: $basename"
    python3 llm_translate.py \
        --input "$file" \
        --output "../temp_files/llm_json/${basename}_translated.json"
done

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ
python3 llm_translate_apply.py

# 4. –£–ø–∞–∫–æ–≤–∞—Ç—å
python3 smart_pack_translations.py
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

–ü–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã:

- [ ] –í—Å–µ –º–æ–¥—É–ª–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –ü–µ—Ä–µ–≤–æ–¥—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ `.rpy` —Ñ–∞–π–ª—ã
- [ ] –£–ø–∞–∫–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `smart_pack_translations.py`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –∏–≥—Ä–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∏–∞–ª–æ–≥–∏
- [ ] –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –ù–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ Ren'Py
